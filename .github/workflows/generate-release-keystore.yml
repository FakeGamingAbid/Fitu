 name: Generate Release Keystore

on:
  workflow_dispatch:
    inputs:
      key_alias:
        description: 'Key alias name'
        required: true
        default: 'fitu'
      store_password:
        description: 'Keystore password (min 6 chars)'
        required: true
        default: 'fitu123456'
      key_password:
        description: 'Key password (min 6 chars)'
        required: true
        default: 'fitu123456'
      your_name:
        description: 'Your name (for certificate)'
        required: true
        default: 'Fitu Developer'

jobs:
  generate:
    runs-on: ubuntu-latest
    steps:
      - name: Generate Release Keystore
        run: |
          keytool -genkey -v \
            -keystore fitu-release.keystore \
            -alias ${{ github.event.inputs.key_alias }} \
            -keyalg RSA \
            -keysize 2048 \
            -validity 10000 \
            -storepass ${{ github.event.inputs.store_password }} \
            -keypass ${{ github.event.inputs.key_password }} \
            -dname "CN=${{ github.event.inputs.your_name }},O=Fitu,C=US"
          
          echo ""
          echo "‚úÖ Release Keystore Generated!"
          echo ""
          echo "========================================================"
          echo "üìã SAVE THESE VALUES AS GITHUB SECRETS:"
          echo "========================================================"
          echo ""
          echo "Secret Name: RELEASE_KEYSTORE"
          echo "Secret Value (copy everything on next line):"
          echo ""
          base64 -w 0 fitu-release.keystore
          echo ""
          echo ""
          echo "========================================================"
          echo ""
          echo "Secret Name: KEYSTORE_PASSWORD"
          echo "Secret Value: ${{ github.event.inputs.store_password }}"
          echo ""
          echo "Secret Name: KEY_ALIAS"
          echo "Secret Value: ${{ github.event.inputs.key_alias }}"
          echo ""
          echo "Secret Name: KEY_PASSWORD"  
          echo "Secret Value: ${{ github.event.inputs.key_password }}"
          echo ""
          echo "========================================================"
          echo ""
          echo "‚ö†Ô∏è  IMPORTANT: Save these passwords somewhere safe!"
          echo "‚ö†Ô∏è  You cannot recover them if lost!"
          echo "‚ö†Ô∏è  Delete this workflow run after copying the values!"
          echo ""
          echo "========================================================" 
